{% extends "base.html" %}
{% load static from staticfiles %}
{% load mptt_tags %}
{% load crispy_forms_tags %}

{% block meta_title %} - Board for messages{% endblock meta_title %}

{% block content %}

{% if user.is_authenticated %}
    {% crispy form %}
{% else %}
    <div class="text-center" id="sub-header">
        {% url 'board' as board_url  %}
        <span class="lead">For adding messages or comments, please: </span>
        <a href="{% url 'social:begin' 'facebook' %}?next={{ board_url }}">
            <img src="{% static 'img/facebook2.png' %}" >
        </a>
    </div>
{% endif %}

<ul  class="list-group">
    {% recursetree notices %}
        <li class="list-group-item">
            <span>({{ node.created|date:"Y-M-d H:i:s" }}) {{ node.user }}:</span>
            <p class="content">{{ node.content }}</p>

                {% if user.is_authenticated %}
                    <div>
                        <button type="button" class="addcomment btn btn-warning btn-xs"
                                data-comment-id="{{ node.id }}">Add
                            comment</button>
                        {% if user == node.user %}/
                        <a href="#">Correct</a>
                        {% endif %}
                        <div class="comment" id="comment_to{{ node.id }}">
                            <!--<input type="text" value="'{{ node.id }}'" class="input-comment" placeholder="Write your-->
                            <!--comment here!" name="input-comment">-->
                            <!--<input type="submit" >-->
                            {% crispy form_comment %}
                        </div>

                    </div>
                {% endif %}
            <br>




            {% if not node.is_leaf_node %}
            <ul class="children">
                    {{ children }}
            </ul>
            {% endif %}
        </li>
    {% endrecursetree %}
</ul>

{% endblock content %}
